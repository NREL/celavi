

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Life Cycle Inventory Analysis &mdash; CELAVI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Uncertainty Methods" href="doc_uncertainty.html" />
    <link rel="prev" title="Cost Graph" href="doc_costgraph.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CELAVI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="doc_config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_scenario.html">Scenario</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_des.html">Discrete Event Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_costgraph.html">Cost Graph</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python Life Cycle Inventory Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-celavi.reeds_importer">ReEDS Data Importer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discrete-event-simulation-interface">Discrete Event Simulation Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#insitu-emission-calculations">Insitu Emission Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concrete-inventory-editor">Concrete Inventory Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background-inventory-optimization">Background Inventory Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#foreground-inventory-optimization">Foreground Inventory Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background-emissions-postprocessing">Background Emissions Postprocessing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="doc_uncertainty.html">Uncertainty Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_diagnostic_viz.html">Postprocessing and Diagnostic Visualizations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CELAVI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Python Life Cycle Inventory Analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/doc_pylcia.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-life-cycle-inventory-analysis">
<h1>Python Life Cycle Inventory Analysis<a class="headerlink" href="#python-life-cycle-inventory-analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-celavi.reeds_importer">
<span id="reeds-data-importer"></span><h2>ReEDS Data Importer<a class="headerlink" href="#module-celavi.reeds_importer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="celavi.reeds_importer.ReedsImporter">
<em class="property">class </em><code class="sig-prename descclassname">celavi.reeds_importer.</code><code class="sig-name descname">ReedsImporter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reeds_imported_filename</span></em>, <em class="sig-param"><span class="n">reeds_output_filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.reeds_importer.ReedsImporter" title="Permalink to this definition">¶</a></dt>
<dd><p>The ReedsImporter class</p>
<ul class="simple">
<li><p>Provides an object which stores the files names required for modifying ReEDS
output datasets for compatibility with pyLCIA.</p></li>
<li><p>Calls the data manipulation methods.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reeds_imported_filename</strong> (<em>str</em>) – Name of the manually edited ReEDS input file.</p></li>
<li><p><strong>reeds_output_filename</strong> (<em>str</em>) – Name of the final pyLCIA compatible electricity grid mix file.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="celavi.reeds_importer.ReedsImporter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reeds_imported_filename</span></em>, <em class="sig-param"><span class="n">reeds_output_filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.reeds_importer.ReedsImporter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the filenames required for ReEDS data manipulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reeds_imported_filename</strong> (<em>str</em>) – Name of the manually edited ReEDS input file</p></li>
<li><p><strong>reeds_output_filename</strong> (<em>str</em>) – Name of the final pylcia compatible electricity grid mix file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.reeds_importer.ReedsImporter.state_level_reeds_importer">
<code class="sig-name descname">state_level_reeds_importer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#celavi.reeds_importer.ReedsImporter.state_level_reeds_importer" title="Permalink to this definition">¶</a></dt>
<dd><p>Store filenames and performs ReEDS data manipulation at the state
electricity grid mix level.</p>
</dd></dl>

<dl class="py method">
<dt id="celavi.reeds_importer.ReedsImporter.national_level_reeds_importer">
<code class="sig-name descname">national_level_reeds_importer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#celavi.reeds_importer.ReedsImporter.national_level_reeds_importer" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores filenames and performs ReEDS data manipulation at the national
electricity grid mix level.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="discrete-event-simulation-interface">
<h2>Discrete Event Simulation Interface<a class="headerlink" href="#discrete-event-simulation-interface" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="des_interface.PylcaCelavi">
<em class="property">class </em><code class="sig-prename descclassname">des_interface.</code><code class="sig-name descname">PylcaCelavi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lcia_des_filename</span></em>, <em class="sig-param"><span class="n">shortcutlca_filename</span></em>, <em class="sig-param"><span class="n">intermediate_demand_filename</span></em>, <em class="sig-param"><span class="n">dynamic_lci_filename</span></em>, <em class="sig-param"><span class="n">electricity_grid_spatial_level</span></em>, <em class="sig-param"><span class="n">static_lci_filename</span></em>, <em class="sig-param"><span class="n">uslci_tech_filename</span></em>, <em class="sig-param"><span class="n">uslci_emission_filename</span></em>, <em class="sig-param"><span class="n">uslci_process_filename</span></em>, <em class="sig-param"><span class="n">stock_filename</span></em>, <em class="sig-param"><span class="n">emissions_lci_filename</span></em>, <em class="sig-param"><span class="n">traci_lci_filename</span></em>, <em class="sig-param"><span class="n">use_shortcut_lca_calculations</span></em>, <em class="sig-param"><span class="n">verbose</span></em>, <em class="sig-param"><span class="n">substitution_rate</span></em>, <em class="sig-param"><span class="n">run</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#des_interface.PylcaCelavi" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="des_interface.PylcaCelavi.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lcia_des_filename</span></em>, <em class="sig-param"><span class="n">shortcutlca_filename</span></em>, <em class="sig-param"><span class="n">intermediate_demand_filename</span></em>, <em class="sig-param"><span class="n">dynamic_lci_filename</span></em>, <em class="sig-param"><span class="n">electricity_grid_spatial_level</span></em>, <em class="sig-param"><span class="n">static_lci_filename</span></em>, <em class="sig-param"><span class="n">uslci_tech_filename</span></em>, <em class="sig-param"><span class="n">uslci_emission_filename</span></em>, <em class="sig-param"><span class="n">uslci_process_filename</span></em>, <em class="sig-param"><span class="n">stock_filename</span></em>, <em class="sig-param"><span class="n">emissions_lci_filename</span></em>, <em class="sig-param"><span class="n">traci_lci_filename</span></em>, <em class="sig-param"><span class="n">use_shortcut_lca_calculations</span></em>, <em class="sig-param"><span class="n">verbose</span></em>, <em class="sig-param"><span class="n">substitution_rate</span></em>, <em class="sig-param"><span class="n">run</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#des_interface.PylcaCelavi.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores filenames in self and deletes old interface file if it exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lcia_des_filename</strong> (<em>str</em>) – Path to file that stores calculated impacts for passing back to the
discrete event simulation.</p></li>
<li><p><strong>shortcutlca_filename</strong> (<em>str</em>) – Path to file where previously calculated impacts are stored. This file
can be used instead of re-calculating impacts from the inventory.</p></li>
<li><p><strong>intermediate_demand_filename</strong> (<em>str</em>) – Path to file that stores the final demand vector every time the LCIA
calculations are run. For debugging purposes only.</p></li>
<li><p><strong>dynamic_lci_filename</strong> (<em>str</em>) – Path to the LCI dataset which changes with time.</p></li>
<li><p><strong>electricity_grid_spatial_level</strong> (<em>str</em>) – Specification of grid spatial level used for lca calculations. Must be
“state” or “national”.</p></li>
<li><p><strong>static_lci_filename</strong> (<em>str</em>) – Path to the LCI dataset which does not change with time.</p></li>
<li><p><strong>uslci_filename</strong> (<em>str</em>) – Path to the U.S. LCI dataset pickle file.</p></li>
<li><p><strong>stock_filename</strong> (<em>str</em>) – Filename for storage pickle variable.</p></li>
<li><p><strong>emissions_lci_filename</strong> (<em>str</em>) – Filename for emissions inventory.</p></li>
<li><p><strong>traci_lci_filename</strong> (<em>str</em>) – Filename for TRACI 2.0 characterization factor dataset.</p></li>
<li><p><strong>use_shortcut_lca_calculations</strong> (<em>Boolean</em>) – Boolean flag for using previously calculating impact data or running the
optimization code to re-calculate impacts.</p></li>
<li><p><strong>substitution_rate</strong> (<em>Dict</em>) – Dictionary of material name: substitution rates for materials displaced by the
circular component.</p></li>
<li><p><strong>run</strong> (<em>int</em>) – Model run. Defaults to zero.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="des_interface.PylcaCelavi.lca_performance_improvement">
<code class="sig-name descname">lca_performance_improvement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">electricity_grid_spatial_level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#des_interface.PylcaCelavi.lca_performance_improvement" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to bypass optimization based pylca celavi calculations
It reads emission factor data from previous runs stored in a shortcut LCA file
and performs LCIA rapidly.</p>
<p>The emission factor data file should be deleted and re-generated after any
significant updates to the input datasets or scenario definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <p>Material flow and process information provided by the DES.
Columns:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Material name</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>Optional state identifier. Required only if electricity_grid_spatial_level is “state”.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID for the route along which transportation occurs. None for non-transportation activities.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>state</strong> (<em>str</em>) – State identifier. Currently not used</p></li>
<li><p><strong>electricity_grid_spatial_level</strong> (<em>str</em>) – Specification of grid spatial level used for lca calculations. Must be “state” or “national”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><em>pandas.DataFrame</em> – Material flow and process information provided by the DES.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Material being processed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>State in which process exists.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID of transportation route.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p><em>pandas.DataFrame</em> – Pollutant flows from the shortcut LCA file, or an empty DataFrame if the shortcut file doesn’t exist
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>flow name: str</dt><dd><p>Pollutant name.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow unit: str</dt><dd><p>Unit of pollutant flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow quantity: float</dt><dd><p>Pollutant flow quantity.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>facility_id: int</dt><dd><p>Facility ID.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Material being processed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID of transportation route.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="des_interface.PylcaCelavi.pylca_run_main">
<code class="sig-name descname">pylca_run_main</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#des_interface.PylcaCelavi.pylca_run_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs all LCIA calculations (insitue, background, foreground, and postprocessing).</p>
<p>Returns LCIA results as a DataFrame, and appends the LCIA results to a CSV file for debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <p>Material flows from DES.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>?</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Environmental impact quantities (TRACI).
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>?</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="insitu-emission-calculations">
<h2>Insitu Emission Calculations<a class="headerlink" href="#insitu-emission-calculations" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="insitu_emission.preprocessing">
<code class="sig-prename descclassname">insitu_emission.</code><code class="sig-name descname">preprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df_static</span></em><span class="sig-paren">)</span><a class="headerlink" href="#insitu_emission.preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocesses the process material and energy input inventory before the LCA calculations are performed
and removes dummy processes with no output from the background inventory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df_static</strong> (<em>pd.DataFrame</em>) – Static insitu inventory. Columns are derived from the processes with insitu emissions.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>pd.DataFrame</em> – Preprocessed background inventory. Columns are derived from the background LCI database being used.</p></li>
<li><p><em>pd.DataFrame</em> – Background inventory with no product flows. Columns are derived from the background LCI database being used.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="insitu_emission.solver">
<code class="sig-prename descclassname">insitu_emission.</code><code class="sig-name descname">solver</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tech_matrix</span></em>, <em class="sig-param"><span class="n">F</span></em>, <em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">df_with_all_other_flows</span></em><span class="sig-paren">)</span><a class="headerlink" href="#insitu_emission.solver" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the process scaling vector s by solving the Xs = F material balance equations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tech_matrix</strong> (<em>array</em>) – Technology matrix (two-dimensional array) generated from the background inventory. Columns are derived from the background LCI database being used.</p></li>
<li><p><strong>F</strong> (<em>array</em>) – Final demand vector (one-dimensional array) representing supply chain material and energy inputs.</p></li>
<li><p><strong>process</strong> (<em>list</em>) – List of process names corresponding to the scaling vector s.</p></li>
<li><p><strong>df_with_all_other_flows</strong> (<em>pandas.DataFrame</em>) – Background process inventory with no product flows. Columns are derived from the background LCI database being used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>LCIA results: Mass pollutant flows associated with the supply chain’s material and energy inputs.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>product: str</dt><dd><p>Name of pollutant.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>unit: str</dt><dd><p>Unit for pollutant flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>value: float</dt><dd><p>Pollutant flow quantity.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="insitu_emission.electricity_corrector_before20">
<code class="sig-prename descclassname">insitu_emission.</code><code class="sig-name descname">electricity_corrector_before20</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="headerlink" href="#insitu_emission.electricity_corrector_before20" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to replace pre 2020 electricity flows with the base electricity mix flow
in the USLCI inventory Electricity, at Grid, US, 2010’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pd.DataFrame</em>) – Background process inventory. Columns are derived from the background LCI database being used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Background process inventory with electricity flows before 2020 converted to the base electricity
mix flow in USLCI. Columns are derived from the background LCI database being used.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="insitu_emission.runner_insitu">
<code class="sig-prename descclassname">insitu_emission.</code><code class="sig-name descname">runner_insitu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tech_matrix</span></em>, <em class="sig-param"><span class="n">F</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">j</span></em>, <em class="sig-param"><span class="n">k</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">final_demand_scaler</span></em>, <em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">df_with_all_other_flows</span></em><span class="sig-paren">)</span><a class="headerlink" href="#insitu_emission.runner_insitu" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the solver function and creates final data frame in proper format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> (<em>tech</em>) – Technology matrix form of the background process inventory.</p></li>
<li><p><strong>F</strong> (<em>pd.Series</em>) – Final demand vector with supply chain material and energy inputs.</p></li>
<li><p><strong>yr</strong> (<em>int</em>) – Model year</p></li>
<li><p><strong>i</strong> (<em>int</em>) – facility ID</p></li>
<li><p><strong>j</strong> (<em>str</em>) – Name of supply chain stage</p></li>
<li><p><strong>k</strong> (<em>str</em>) – Name of material</p></li>
<li><p><strong>state</strong> (<em>str</em>) – State where the facility is located.</p></li>
<li><p><strong>final_demand_scaler</strong> (<em>int</em>) – Integer for scaling final demand and avoiding badly scaled matrix calculations.</p></li>
<li><p><strong>process</strong> (<em>list</em>) – List of processes included in the technology matrix</p></li>
<li><p><strong>df_with_all_other_flows</strong> (<em>pd.DataFrame</em>) – Dataframe with flows in the inventory which do not have a production process.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Returns the pollutant inventory (pollutant mass flows) for processing material k through facility i in year yr.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>product: str</p></li>
<li><p>unit: str</p></li>
<li><p>value: float</p></li>
<li><p>year: int</p></li>
<li><p>facility_id: int</p></li>
<li><p>stage: str</p></li>
<li><p>material: str</p></li>
<li><p>route_id: str</p></li>
<li><p>state: str</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="insitu_emission.model_celavi_lci_insitu">
<code class="sig-prename descclassname">insitu_emission.</code><code class="sig-name descname">model_celavi_lci_insitu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f_d</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">fac_id</span></em>, <em class="sig-param"><span class="n">stage</span></em>, <em class="sig-param"><span class="n">material</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">df_emissions</span></em>, <em class="sig-param"><span class="n">verbose</span></em><span class="sig-paren">)</span><a class="headerlink" href="#insitu_emission.model_celavi_lci_insitu" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate insitu (process-level or Scope 1) emissions.</p>
<p>Creates technology matrix and final demand vector from the background inventory.
Runs the PyLCA solver to calculate pollutant mass flows.
Returns insitue pollutant mass flows as a DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f_d</strong> (<em>pandas.DataFrame</em>) – Final demand for the process with insitu emissions.</p></li>
<li><p><strong>yr</strong> (<em>int</em>) – Model year.</p></li>
<li><p><strong>fac_id</strong> (<em>int</em>) – Facility ID of facility being evaluated</p></li>
<li><p><strong>stage</strong> (<em>str</em>) – Supply chain stage.</p></li>
<li><p><strong>material</strong> (<em>str</em>) – Material being processed.</p></li>
<li><p><strong>df_emission</strong> (<em>pandas.DataFrame</em>) – <p>Insitu emissons inventory.
Columns:</p>
<blockquote>
<div><ul>
<li><p>?</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – Controls the level of progress reporting from this method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Insitu mass pollutant flows for processing “material” through “fac_id”.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>flow name: str</dt><dd><p>Name of pollutant</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow unit: str</dt><dd><p>Pollutant unit</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow quantity: float</dt><dd><p>Quantity of pollutant produced</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>facility_id: int</dt><dd><p>ID of supply chain facility producing these pollutants</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage at this facility</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Material being processed</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID for route, for transportation calculations</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>State in which facility is located</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="concrete-inventory-editor">
<h2>Concrete Inventory Editor<a class="headerlink" href="#concrete-inventory-editor" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="concrete_life_cycle_inventory_editor.concrete_life_cycle_inventory_updater">
<code class="sig-prename descclassname">concrete_life_cycle_inventory_editor.</code><code class="sig-name descname">concrete_life_cycle_inventory_updater</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_f</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">k</span></em>, <em class="sig-param"><span class="n">stage</span></em>, <em class="sig-param"><span class="n">static_filename</span></em>, <em class="sig-param"><span class="n">stock_filename</span></em>, <em class="sig-param"><span class="n">emissions_filename</span></em>, <em class="sig-param"><span class="n">substitution_rate</span></em><span class="sig-paren">)</span><a class="headerlink" href="#concrete_life_cycle_inventory_editor.concrete_life_cycle_inventory_updater" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a static concrete production inventory based on availability of ground blade material at the cement processing stage.</p>
<p>If blade material is not available, a stock variable is created to keep track of the amount of material available for
use in cement co-processing in later years.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d_f</strong> (<em>pandas.DataFrame</em>) – Material flow, stage and facility information from the DES interface.</p></li>
<li><p><strong>yr</strong> (<em>int</em>) – Model year.</p></li>
<li><p><strong>k</strong> (<em>str</em>) – Material being processed.</p></li>
<li><p><strong>stage</strong> (<em>str</em>) – Supply chain stage.</p></li>
<li><p><strong>static_filename</strong> (<em>str</em>) – Filename for the static concrete production inventory.</p></li>
<li><p><strong>stock_filename</strong> (<em>str</em>) – Filename for the material stock variable (pickled).</p></li>
<li><p><strong>emissons_filename</strong> (<em>str</em>) – Filename for concrete production emissions inventory.</p></li>
<li><p><strong>substitution_rate</strong> (<em>Dict</em>) – Dictionary of substitution rates for materials displaced by the ground blade material.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><em>pd.DataFrame</em> – Static inventory updated with changes due to concrete demand and blade material availability.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>?</p></li>
</ul>
</div></blockquote>
</li>
<li><p><em>pd.DataFrame</em> – Concrete production insitu emissions inventory.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>?</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="background-inventory-optimization">
<h2>Background Inventory Optimization<a class="headerlink" href="#background-inventory-optimization" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pylca_opt_background.model_celavi_lci_background">
<code class="sig-prename descclassname">pylca_opt_background.</code><code class="sig-name descname">model_celavi_lci_background</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f_d</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">fac_id</span></em>, <em class="sig-param"><span class="n">stage</span></em>, <em class="sig-param"><span class="n">material</span></em>, <em class="sig-param"><span class="n">route_id</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">uslci_tech_filename</span></em>, <em class="sig-param"><span class="n">uslci_emission_filename</span></em>, <em class="sig-param"><span class="n">uslci_process_filename</span></em>, <em class="sig-param"><span class="n">verbose</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_opt_background.model_celavi_lci_background" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the pollutant inventory calculations based on information provided by the DES interface.</p>
<p>Creates the technology matrix and the final demand vector based on input data.
Performs necessary checks before and after the LCA  calculation.</p>
<dl class="simple">
<dt>Checks performed:</dt><dd><p>1. Final demand by the foreground system is not zero. If the final demand is zero, this method
returns an empty DataFrame and the simulation continues.
2. Checks the LCA solver returned a non-empty DataFrame. If an empty DataFrame is returned,
this method attaches column names to the DataFrame and the simulation continues.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f_d</strong> (<em>pandas.DataFrame</em>) – Dataframe from DES interface containing material flow information</p></li>
<li><p><strong>yr</strong> (<em>int</em>) – Model year</p></li>
<li><p><strong>fac_id</strong> (<em>int</em>) – Facility id</p></li>
<li><p><strong>stage</strong> (<em>str</em>) – Supply chain stage</p></li>
<li><p><strong>material</strong> (<em>str</em>) – Material being processed</p></li>
<li><p><strong>route_id</strong> (<em>str</em>) – Unique identifier for transportation route.</p></li>
<li><p><strong>state</strong> (<em>str</em>) – State in which LCA calculations are taking place.</p></li>
<li><p><strong>uslci_tech_filename</strong> (<em>str</em>) – Filename for the USLCI technology matrix. It contains the technology matrix from USLCI.</p></li>
<li><p><strong>uslci_process_filename</strong> (<em>str</em>) – Filename for the USLCI process list matrix. It contains the list of processes in the USLCI.</p></li>
<li><p><strong>uslci_emission_filename</strong> (<em>str</em>) – Filename for the USLCI emissions list matrix. It contains the list of emissions from acttivities in the background process inventory.</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – Toggles level of progress reporting provided by this method. Defaults to 0 (no reporting).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Mass pollutant flows for demand of material from a facility.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>product: str</dt><dd><p>Name of pollutant.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>unit: str</dt><dd><p>Pollutant flow units.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>value: float</dt><dd><p>Pollutant flow value.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>facility_id: int</dt><dd><p>Facility ID.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage at this facility.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Name of material being processed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID for transportation route</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>State in which facility is located.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<p>Please note: <cite>model_celavi_lci_background</cite> has functions defined within it that are not accessible to the autodoc.</p>
</div>
<div class="section" id="foreground-inventory-optimization">
<h2>Foreground Inventory Optimization<a class="headerlink" href="#foreground-inventory-optimization" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pylca_opt_foreground.preprocessing">
<code class="sig-prename descclassname">pylca_opt_foreground.</code><code class="sig-name descname">preprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">df_static</span></em>, <em class="sig-param"><span class="n">dynamic_lci_filename</span></em>, <em class="sig-param"><span class="n">electricity_grid_spatial_level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_opt_foreground.preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocesses the foreground process inventory, joins the dynamic and static inventories, and
removes dummy processes with no output from the inventory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>str</em>) – Model year.</p></li>
<li><p><strong>state</strong> (<em>str</em>) – State in which calculations are taking place.</p></li>
<li><p><strong>df_static</strong> (<em>pd.DataFrame</em>) – Static foreground LCI.</p></li>
<li><p><strong>dynamic_lci_filename</strong> (<em>str</em>) – Dynamic foreground LCI.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><em>pd.DataFrame</em> – Cleaned foreground inventory merged with dynamic data.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>flow name</p></li>
<li><p>flow unit</p></li>
<li><p>flow quantity</p></li>
<li><p>year</p></li>
<li><p>facility_id</p></li>
<li><p>stage</p></li>
<li><p>material</p></li>
<li><p>route_id</p></li>
<li><p>state</p></li>
</ul>
</div></blockquote>
</li>
<li><p><em>pd.DataFrame</em> – Foreground inventory with no product flows.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>flow name</p></li>
<li><p>flow unit</p></li>
<li><p>flow quantity</p></li>
<li><p>year</p></li>
<li><p>facility_id</p></li>
<li><p>stage</p></li>
<li><p>material</p></li>
<li><p>route_id</p></li>
<li><p>state</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pylca_opt_foreground.solver">
<code class="sig-prename descclassname">pylca_opt_foreground.</code><code class="sig-name descname">solver</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tech_matrix</span></em>, <em class="sig-param"><span class="n">F</span></em>, <em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">df_with_all_other_flows</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_opt_foreground.solver" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the process scaling vector s by solving the Xs = F material balance equations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tech_matrix</strong> (<em>Matrix</em>) – Technology matrix generated from the background inventory.</p></li>
<li><p><strong>F</strong> (<em>vector</em>) – Final demand vector representing supply chain material and energy inputs.</p></li>
<li><p><strong>process</strong> (<em>list</em>) – List of process names corresponding to the scaling vector s.</p></li>
<li><p><strong>df_with_all_other_flows</strong> (<em>pd.DataFrame</em>) – Foreground inventory with no product flows.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Mass input flows to background inventory calculated for demand of material. No emission flows are
included in this DataFrame.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>product</p></li>
<li><p>unit</p></li>
<li><p>value</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pylca_opt_foreground.electricity_corrector_before20">
<code class="sig-prename descclassname">pylca_opt_foreground.</code><code class="sig-name descname">electricity_corrector_before20</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_opt_foreground.electricity_corrector_before20" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces pre-2020 electricity flows with the base electricity mix flow
in the USLCI inventory Electricity, at Grid, US, 2010’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pd.DataFrame</em>) – Foreground inventory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Foreground inventory with pre-2020 electricity flows converted to the base electricity
mix flow in USLCI.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><p>flow name: str</p></li>
<li><p>flow unit: str</p></li>
<li><p>flow quantity: float</p></li>
<li><p>year: int</p></li>
<li><p>facility_id: int</p></li>
<li><p>stage: str</p></li>
<li><p>material: str</p></li>
<li><p>route_id: str</p></li>
<li><p>state: str</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pylca_opt_foreground.lca_runner_foreground">
<code class="sig-prename descclassname">pylca_opt_foreground.</code><code class="sig-name descname">lca_runner_foreground</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tech_matrix</span></em>, <em class="sig-param"><span class="n">F</span></em>, <em class="sig-param"><span class="n">yr</span></em>, <em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">j</span></em>, <em class="sig-param"><span class="n">k</span></em>, <em class="sig-param"><span class="n">route_id</span></em>, <em class="sig-param"><span class="n">state</span></em>, <em class="sig-param"><span class="n">final_demand_scaler</span></em>, <em class="sig-param"><span class="n">process</span></em>, <em class="sig-param"><span class="n">df_with_all_other_flows</span></em>, <em class="sig-param"><span class="n">intermediate_demand_filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_opt_foreground.lca_runner_foreground" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the LCA solver function and arranges and stores the results into a proper pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> (<em>tech</em>) – technology matrix built from the process inventory.</p></li>
<li><p><strong>F</strong> (<em>final demand series vector</em>) – final demand of the LCA problem</p></li>
<li><p><strong>yr</strong> (<em>int</em>) – year of analysis</p></li>
<li><p><strong>i</strong> (<em>int</em>) – facility ID</p></li>
<li><p><strong>j</strong> (<em>str</em>) – stage</p></li>
<li><p><strong>k</strong> (<em>str</em>) – material</p></li>
<li><p><strong>route_id</strong> (<em>str</em>) – UUID identifying the transportation route</p></li>
<li><p><strong>state</strong> (<em>str</em>) – state in which LCA calculations are taking place</p></li>
<li><p><strong>final_demand_scaler</strong> (<em>int</em>) – scaling variable number to ease calculation</p></li>
<li><p><strong>process</strong> (<em>list</em>) – list of processes included in the technology matrix</p></li>
<li><p><strong>df_with_all_other_flows</strong> (<em>pd.DataFrame</em>) – Dataframe with flows in the inventory which do not have a production process.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Returns the final LCA reults in a properly arranged dataframe with all supplemental information
LCA results in the form of a dataframe.
columns=[‘product’, ‘unit’, ‘value’,</p>
<blockquote>
<div><p>’year’, ‘facility_id’, ‘stage’, ‘material’, ‘route_id’, ‘state’]</p>
</div></blockquote>
<p>These are mass input flows to USLCI calculated for demand of material at a certain stage and from a facility. No emission flows are included in this calculation.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="background-emissions-postprocessing">
<h2>Background Emissions Postprocessing<a class="headerlink" href="#background-emissions-postprocessing" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pylca_celavi_background_postprocess.postprocessing">
<code class="sig-prename descclassname">pylca_celavi_background_postprocess.</code><code class="sig-name descname">postprocessing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">final_res</span></em>, <em class="sig-param"><span class="n">insitu</span></em>, <em class="sig-param"><span class="n">verbose</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_celavi_background_postprocess.postprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines the insitu and background pollutant flows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>final_res</strong> (<em>pandas.DataFrame</em>) – Background pollutant flow quantities.</p></li>
<li><p><strong>insitu</strong> (<em>pandas.DataFrame</em>) – Insitu pollutant flow quantities.</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – Controls the level of progress reporting from this method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Total pollutant flows for a material being processed through a facility.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>flow name: str</dt><dd><p>Pollutant name.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow unit: str</dt><dd><p>Unit of pollutant flow.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>facility_id: int</dt><dd><p>Facility ID.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Name of material.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID of transportation route.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>State in which facility is located.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>flow quantity: float</dt><dd><p>Pollutant quantity.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pylca_celavi_background_postprocess.impact_calculations">
<code class="sig-prename descclassname">pylca_celavi_background_postprocess.</code><code class="sig-name descname">impact_calculations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">final_res</span></em>, <em class="sig-param"><span class="n">traci_lci_filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pylca_celavi_background_postprocess.impact_calculations" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts pollutant mass flows to environmental impacts using the TRACI 2.1 midpoint characterization method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>final_res</strong> (<em>pandas.DataFrame</em>) – Total (insitu and background) pollutant mass flows.</p></li>
<li><p><strong>traci_lci_filename</strong> (<em>str</em>) – Filename where the TRACI characterization factors are stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Total environmental impacts.
Columns:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>year: int</dt><dd><p>Model year.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>facility_id: int</dt><dd><p>Facility ID.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>material: str</dt><dd><p>Name of material being processed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>route_id: str</dt><dd><p>UUID of transportation route.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>state: str</dt><dd><p>State in which facility is located.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>stage: str</dt><dd><p>Supply chain stage.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>impacts: str</dt><dd><p>Name of environmental impact.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>impact: float</dt><dd><p>Environmental impact quantity.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="doc_uncertainty.html" class="btn btn-neutral float-right" title="Uncertainty Methods" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="doc_costgraph.html" class="btn btn-neutral float-left" title="Cost Graph" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, NREL

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>