

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Discrete Event Simulation &mdash; CELAVI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Cost Graph" href="doc_costgraph.html" />
    <link rel="prev" title="Scenario" href="doc_scenario.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="main_page.html" class="icon icon-home"> CELAVI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="doc_config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_scenario.html">Scenario</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Discrete Event Simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-celavi.des">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#component">Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-celavi.inventory">Facility Inventory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#critical-instance-variables">Critical Instance Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-celavi.transportation_tracker">Transportation Tracker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="doc_costgraph.html">Cost Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_pylcia.html">Python Life Cycle Inventory Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_diagnostic_viz.html">Postprocessing and Diagnostic Visualizations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="main_page.html">CELAVI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="main_page.html">Docs</a> &raquo;</li>
        
      <li>Discrete Event Simulation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/doc_des.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="discrete-event-simulation">
<h1>Discrete Event Simulation<a class="headerlink" href="#discrete-event-simulation" title="Permalink to this headline">¶</a></h1>
<p>The discrete event simulation (DES) consists of:</p>
<ul class="simple">
<li><p>A <strong>Context</strong> instance which stores supply-chain-level information and methods.</p></li>
<li><p>Many <strong>Component</strong> instances that transition through the supply chain during the simulation.</p></li>
<li><p>A <strong>Facility Inventory</strong> for every facility in the supply chain: this inventory records material flows.</p></li>
<li><p>A <strong>Transportation Tracker</strong> for every facility in the supply chain with <em>inbound</em> material flows.</p></li>
</ul>
<div class="section" id="module-celavi.des">
<span id="context"></span><h2>Context<a class="headerlink" href="#module-celavi.des" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="celavi.des.Context">
<em class="property">class </em><code class="sig-prename descclassname">celavi.des.</code><code class="sig-name descname">Context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">locations_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">step_costs_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">component_material_masses_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">possible_components</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">possible_materials</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">cost_graph</span><span class="p">:</span> <span class="n"><a class="reference internal" href="doc_costgraph.html#celavi.costgraph.CostGraph" title="celavi.costgraph.CostGraph">celavi.costgraph.CostGraph</a></span></em>, <em class="sig-param"><span class="n">lca</span><span class="p">:</span> <span class="n">celavi.pylca_celavi.des_interface.PylcaCelavi</span></em>, <em class="sig-param"><span class="n">cost_graph_update_interval_timesteps</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">path_dict</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2000</span></em>, <em class="sig-param"><span class="n">end_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2050</span></em>, <em class="sig-param"><span class="n">max_timesteps</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">600</span></em>, <em class="sig-param"><span class="n">timesteps_per_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">12</span></em>, <em class="sig-param"><span class="n">model_run</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context" title="Permalink to this definition">¶</a></dt>
<dd><p>The Context class:</p>
<ul class="simple">
<li><p>Provides the discrete time sequence for the model</p></li>
<li><p>Holds all the components in the model</p></li>
<li><p>Holds parameters for pathway cost models (dictionary)</p></li>
<li><p>Links the CostGraph to the DES model</p></li>
<li><p>Provides translation of years to timesteps and back again</p></li>
</ul>
<dl class="py method">
<dt id="celavi.des.Context.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">locations_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">step_costs_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">component_material_masses_filename</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">possible_components</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">possible_materials</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">cost_graph</span><span class="p">:</span> <span class="n"><a class="reference internal" href="doc_costgraph.html#celavi.costgraph.CostGraph" title="celavi.costgraph.CostGraph">celavi.costgraph.CostGraph</a></span></em>, <em class="sig-param"><span class="n">lca</span><span class="p">:</span> <span class="n">celavi.pylca_celavi.des_interface.PylcaCelavi</span></em>, <em class="sig-param"><span class="n">cost_graph_update_interval_timesteps</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">path_dict</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2000</span></em>, <em class="sig-param"><span class="n">end_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2050</span></em>, <em class="sig-param"><span class="n">max_timesteps</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">600</span></em>, <em class="sig-param"><span class="n">timesteps_per_year</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">12</span></em>, <em class="sig-param"><span class="n">model_run</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>locations_filename</strong> (<em>str</em>) – Path to the processed facility locations dataset.</p></li>
<li><p><strong>step_costs_filename</strong> (<em>str</em>) – Path to the step_costs dataset that determines the process steps in
each facility.</p></li>
<li><p><strong>component_material_masses_filename</strong> (<em>str</em>) – Path to the dataset specifying component composition (materials and
masses) over time.</p></li>
<li><p><strong>possible_components</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The list of possible technology components.</p></li>
<li><p><strong>possible_materials</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – The possible materials in the components. This should span all
component types.</p></li>
<li><p><strong>cost_graph</strong> (<a class="reference internal" href="doc_costgraph.html#celavi.costgraph.CostGraph" title="celavi.costgraph.CostGraph"><em>CostGraph</em></a>) – The CostGraph instance to use with this Context instance.</p></li>
<li><p><strong>lca</strong> (<a class="reference internal" href="doc_pylcia.html#des_interface.PylcaCelavi" title="des_interface.PylcaCelavi"><em>PylcaCelavi</em></a>) – The pyLCIA instance to use with this Context instance.</p></li>
<li><p><strong>cost_graph_update_interval_timesteps</strong> (<em>int</em>) – Frequency at which the process costs within the CostGraph instance are
re-calculated.</p></li>
<li><p><strong>path_dict</strong> (<em>Dict</em>) – Dictionary of parameters for the learning-by-doing models and all
other pathway cost models. The structure and content of this dictionary
will vary by case study and is specified in the Scenario configuration
file.</p></li>
<li><p><strong>min_year</strong> (<em>int</em>) – Simulation start (calendar) year. Optional. If left unspecified
defaults to 2000.</p></li>
<li><p><strong>max_timesteps</strong> (<em>int</em>) – The maximum number of discrete timesteps in the simulation. Defaults
to 200 or an end year of 2050.</p></li>
<li><p><strong>timesteps_per_year</strong> (<em>int</em>) – The number of timesteps in one simulation year. Default value is 12
timesteps per year, corresponding to a monthly model resolution.</p></li>
<li><p><strong>model_run</strong> (<em>int</em>) – Model run identifier</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.years_to_timesteps">
<code class="sig-name descname">years_to_timesteps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#celavi.des.Context.years_to_timesteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert calendar year into the corresponding timestep of the discrete
event model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>year</strong> (<em>float</em>) – The year can have a fractional part. The result of the conversion
is rounding to the nearest integer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The DES timestep that corresponds to the year.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.timesteps_to_years">
<code class="sig-name descname">timesteps_to_years</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timesteps</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#celavi.des.Context.timesteps_to_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the discrete DES timestep to a fractional calendar year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timesteps</strong> (<em>int</em>) – The discrete timestep number. Must be an integer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The year converted from the discrete timestep.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.populate">
<code class="sig-name descname">populate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span><span class="p">:</span> <span class="n">pandas.core.frame.DataFrame</span></em>, <em class="sig-param"><span class="n">lifespan_fns</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Callable<span class="p">[</span><span class="p">]</span><span class="p">, </span>float<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.populate" title="Permalink to this definition">¶</a></dt>
<dd><p>Before a model can run, components must be loaded into it. This method
loads components from a DataFrame, has the following columns which
correspond to the attributes of a component object:</p>
<p>Each component is placed into a process that will timeout when the
component begins its useful life, as specified in year. From there,
choices about the component’s lifecycle are made as further processes
time out and decisions are made at subsequent timesteps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – <p>The DataFrame which has components specified in the columns below.</p>
<dl class="simple">
<dt>Columns:</dt><dd><dl class="simple">
<dt>kind: str</dt><dd><p>The type of component as a string. It isn’t called “type” because
“type” is a keyword in Python.</p>
</dd>
<dt>year: float</dt><dd><p>The year the component goes into use.</p>
</dd>
<dt>mass_tonnes: float</dt><dd><p>The mass of the component in tonnes.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>lifespan_fns</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><em>float</em><em>]</em><em>]</em>) – A dictionary with the kind of component as the key and a Callable
(probably a lambda function) that takes no arguments and returns
a float as the value. When called, the value should return a value
sampled from a probability distribution that corresponds to a
predicted lifespan of the component. The key is used to call the
value in a way similar to the following: lifespan_fns[row[“kind”]]()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.cumulative_mass_for_component_in_process_at_timestep">
<code class="sig-name descname">cumulative_mass_for_component_in_process_at_timestep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">component_kind</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">process_name</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">timestep</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.cumulative_mass_for_component_in_process_at_timestep" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the cumulative mass at a certain time of a given component
passed through processes that contain the given name.</p>
<p>For example, if you want to find cumulative component mass passed
through coarse grinding facilities at time step 100, this is your
method!</p>
<p>Note: This uses the average component mass for the year, not the sum
of facility inventories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_kind</strong> (<em>str</em>) – The kind of component (such as “blade” passing through an inventory)</p></li>
<li><p><strong>process_name</strong> (<em>str</em>) – The process name (such as “fine griding”) to look for in the facility
inventory names.</p></li>
<li><p><strong>timestep</strong> (<em>int</em>) – The time, in timestep, to calculate the cumulative inventory for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Total cumulative mass of the component in the process at the
timestep.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.pylca_interface_process">
<code class="sig-name descname">pylca_interface_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.pylca_interface_process" title="Permalink to this definition">¶</a></dt>
<dd><p>pylca_interface_process() runs periodically to update the LCIA model with
results from the DES model. It updates the LCA code with the latest distance
and mass flow calculations.</p>
<p>It only calls the LCA code for timesteps where the mass_kg &gt; 0. Years with
zero mass flows are not passed to the LCA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> (<em>Environment</em>) – The SimPy environment this process belongs to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.average_total_component_mass_for_year">
<code class="sig-name descname">average_total_component_mass_for_year</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.average_total_component_mass_for_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Totals the masses of all materials in a component for a given year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>year</strong> (<em>float</em>) – The floating point year. Will be rounded to nearest integer year with
int() and floor()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Average total component mass for a year.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.update_cost_graph_process">
<code class="sig-name descname">update_cost_graph_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.des.Context.update_cost_graph_process" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the SimPy process that updates the cost graph periodically.</p>
</dd></dl>

<dl class="py method">
<dt id="celavi.des.Context.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#celavi.inventory.FacilityInventory" title="celavi.inventory.FacilityInventory">celavi.inventory.FacilityInventory</a><span class="p">]</span><a class="headerlink" href="#celavi.des.Context.run" title="Permalink to this definition">¶</a></dt>
<dd><p>This method executes the discrete event simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary of inventories mapped to their cumulative histories.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[str, pd.DataFrame]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="component">
<h2>Component<a class="headerlink" href="#component" title="Permalink to this headline">¶</a></h2>
<p>A technology component is the basic unit of a CELAVI simulation. A component has one or more constituent materials that are also tracked.</p>
<span class="target" id="module-celavi.component"></span><dl class="py class">
<dt id="celavi.component.Component">
<em class="property">class </em><code class="sig-prename descclassname">celavi.component.</code><code class="sig-name descname">Component</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="n">kind</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">year</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">lifespan_timesteps</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">manuf_facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">in_use_facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">mass_tonnes</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>The Component class works with the Context class to run the discrete
event simulation. There is one instance of Component per physical
component in the simulation. This class models each step in the
lifecycle of the component, from begining of life (BOL) to end of
life (EOL).</p>
<dl class="py method">
<dt id="celavi.component.Component.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="n">kind</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">year</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">lifespan_timesteps</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">manuf_facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">in_use_facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">mass_tonnes</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>This takes parameters named the same as the instance variables. See
the comments for the class for further information about instance
attributes.</p>
<p>It sets the initial state, which is an empty string. This is
because there is no state until the component begins life, when
the process defined in method begin_life() is called by SimPy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>context</strong> (<a class="reference internal" href="#celavi.des.Context" title="celavi.des.Context"><em>Context</em></a>) – The context that contains this component.</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – The type of this component. It isn’t called “type” because
“type” is a keyword in Python.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The calendar year in which this component enters the in use state
for the first time.</p></li>
<li><p><strong>lifespan_timesteps</strong> (<em>float</em>) – The component useful lifetime: the period, in timesteps, that
the component spends in its first in use state. The argument
can be provided as a floating point value, but it is converted
into an integer before it is assigned to the instance attribute.
This allows components to have either fixed integer lifespans,
fixed float lifespans, or lifespans defined with a Weibull
probability distribution.</p></li>
<li><p><strong>mass_tonnes</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>]</em>) – Component composition by material, in tonnes. Keys are
material names. Values are material masses.</p></li>
<li><p><strong>manuf_facility_id</strong> (<em>int</em>) – The facility id where the component begins life (typically but not
necessarily a manufacturing facility type) used in initial pathway
selection from CostGraph.</p></li>
<li><p><strong>in_use_facility_id</strong> (<em>int</em>) – The facility ID where the component spends its first useful lifetime
before beginning the end-of-life process (typically but not necessarily
a renewable energy power plant).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.component.Component.create_pathway_queue">
<code class="sig-name descname">create_pathway_queue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">from_facility_id</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.create_pathway_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the CostGraph instance and construct a queue of the lifecycle for
this component. This method is called during the manufacturing step
and during the eol_process when exiting the in use stage.</p>
<p>This method does not return anything, rather it modifies the
instance attribute self.pathway with a new deque.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>from_facility_id</strong> (<em>int</em>) – The starting location of the the component.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.component.Component.bol_process">
<code class="sig-name descname">bol_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.bol_process" title="Permalink to this definition">¶</a></dt>
<dd><p>This process starts the lifecycle for this component. Since it is
only called once, it does not have a loop, like most other SimPy
processes. When the component reaches end-of-life, this method
sets the end-of-life (EOL) pathway for the component.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> (<em>simpy.Environment</em>) – The SimPy environment running the DES timesteps.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.component.Component.eol_process">
<code class="sig-name descname">eol_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.eol_process" title="Permalink to this definition">¶</a></dt>
<dd><p>This process controls the state transitions for the component at
each end-of-life (EOL) event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> (<em>simpy.Environment</em>) – The environment in which this process is running.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.component.Component.move_component_to">
<code class="sig-name descname">move_component_to</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">loc</span></em>, <em class="sig-param"><span class="n">dist</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">route_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">amt</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.move_component_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment mass, count, and transportation inventories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> (<em>simpy.Environment</em>) – The environment in which this process is running.</p></li>
<li><p><strong>loc</strong> (<em>int</em>) – Destination facility ID.</p></li>
<li><p><strong>dist</strong> (<em>float</em>) – Transportation distance in km to destination facility.</p></li>
<li><p><strong>route_id</strong> (<em>str</em>) – UUID for route along which component is moved. Defaults to None.</p></li>
<li><p><strong>amt</strong> (<em>float</em>) – Number of components being moved. Defaults to 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.component.Component.move_component_from">
<code class="sig-name descname">move_component_from</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">loc</span></em>, <em class="sig-param"><span class="n">amt</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.component.Component.move_component_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrement mass and count inventories at the current facility.</p>
<p>Only INBOUND transportation is tracked, thus no transportation
tracking is done by this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> (<em>simpy.Environment</em>) – The environment in which this process is running.</p></li>
<li><p><strong>loc</strong> (<em>int</em>) – Current facility ID.</p></li>
<li><p><strong>amt</strong> (<em>float</em>) – Number of components being moved. Defaults to 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-celavi.inventory">
<span id="facility-inventory"></span><h2>Facility Inventory<a class="headerlink" href="#module-celavi.inventory" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="celavi.inventory.FacilityInventory">
<em class="property">class </em><code class="sig-prename descclassname">celavi.inventory.</code><code class="sig-name descname">FacilityInventory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">facility_type</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">step</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">possible_items</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">timesteps</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">quantity_unit</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'tonne'</span></em>, <em class="sig-param"><span class="n">can_be_negative</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.inventory.FacilityInventory" title="Permalink to this definition">¶</a></dt>
<dd><p>The inventory class holds an inventory of materials and quantities
for a landfill, virgin material extraction, or recycled material
availability.</p>
<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">facility_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">facility_type</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">step</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">possible_items</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">timesteps</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">quantity_unit</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'tonne'</span></em>, <em class="sig-param"><span class="n">can_be_negative</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.inventory.FacilityInventory.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>facility_id</strong> (<em>int</em>) – The unique facility ID from the processed facility locations dataset.</p></li>
<li><p><strong>facility_type</strong> (<em>str</em>) – The type of the facility from the locations table.</p></li>
<li><p><strong>step</strong> (<em>str</em>) – The processing step that is held by this inventory.</p></li>
<li><p><strong>possible_items</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of strings (e.g., “Nacelle Aluminum”) that represent all
possible component materials that may be stored in this inventory.</p></li>
<li><p><strong>timesteps</strong> (<em>int</em>) – The number of discrete timesteps in the simulation that this
inventory will hold.</p></li>
<li><p><strong>quantity_unit</strong> (<em>str</em>) – The unit in which the quantity is recorded.</p></li>
<li><p><strong>can_be_negative</strong> (<em>bool</em>) – True if the quantity in this inventory can be negative. If False,
the quantity must always be positive, and the instance will
raise an exception if there is an attempt of a negative
transaction.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.increment_quantity">
<code class="sig-name descname">increment_quantity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">timestep</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#celavi.inventory.FacilityInventory.increment_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the material quantity in this inventory.</p>
<p>For virgin material extractions, the quantity should be negative
to indicate a withdrawal.</p>
<p>For landfills and other facility types where components or
materials accumulate or are stored, the quantity should be positive
to indicate a deposit of material.</p>
<p>For other facility inventories, the quantity can either be
positive or negative, depending on if there is an increase in
supply or a decrease in supply at a particular facility inventory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_name</strong> (<em>str</em>) – The material being deposited or withdrawn</p></li>
<li><p><strong>quantity</strong> (<em>int</em>) – The quantity of the material, either positive or negative.</p></li>
<li><p><strong>timestep</strong> (<em>int</em>) – The timestep of this deposit or withdrawal or deposit
(depending on the sign of the quantity).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new quantity of the material.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.cumulative_history">
<em class="property">property </em><code class="sig-name descname">cumulative_history</code><a class="headerlink" href="#celavi.inventory.FacilityInventory.cumulative_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the cumulative level of a facility inventory over all its
transactions.</p>
<p>For facilities where material is not stored and does not accumulate,
the cumulative history will be zero. The cumulative_input_history will
be more informative for facilities of this type.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The cumulative history of all the transactions of the component
materials.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.cumulative_input_history">
<em class="property">property </em><code class="sig-name descname">cumulative_input_history</code><a class="headerlink" href="#celavi.inventory.FacilityInventory.cumulative_input_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the cumulative input quantities of a facility inventory over
all its input transactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The cumulative history of all the transactions of the component
materials.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.transaction_history">
<em class="property">property </em><code class="sig-name descname">transaction_history</code><a class="headerlink" href="#celavi.inventory.FacilityInventory.transaction_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a dictionary of transactions at this facility into a
DataFrame.</p>
<p>Because this method instantiates a DataFrame, it should be called
sparingly, as this is a resource consuming procedure.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The history of transactions in dataframe form.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.inventory.FacilityInventory.input_transaction_history">
<em class="property">property </em><code class="sig-name descname">input_transaction_history</code><a class="headerlink" href="#celavi.inventory.FacilityInventory.input_transaction_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a dictionary of input transactions at this facility
into a DataFrame.</p>
<p>Because this method instantiates a DataFrame, it should be called
sparingly, as this is a resource consuming procedure.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The history of input transactions in dataframe form.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="critical-instance-variables">
<h3>Critical Instance Variables<a class="headerlink" href="#critical-instance-variables" title="Permalink to this headline">¶</a></h3>
<p>These variables are passed to other classes and methods within CELAVI.</p>
<dl class="simple">
<dt>self.component_materials: Dict[str, float]</dt><dd><p>The cumulative amount of component materials over the entire
lifetime of the simulation.</p>
</dd>
<dt>self.component_materials_deposits: List[Dict[str, float]]</dt><dd><p>The history of the deposits from this inventory. These are
instantaneous, not cumulative, values.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="module-celavi.transportation_tracker">
<span id="transportation-tracker"></span><h2>Transportation Tracker<a class="headerlink" href="#module-celavi.transportation_tracker" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="celavi.transportation_tracker.TransportationTracker">
<em class="property">class </em><code class="sig-prename descclassname">celavi.transportation_tracker.</code><code class="sig-name descname">TransportationTracker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timesteps</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.transportation_tracker.TransportationTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>The TransportationTracker class inbound tonne*km values into a facility.
What distinguishes this class from the FacilityInventory is that
the inbound tonne_km only increments.</p>
<dl class="py method">
<dt id="celavi.transportation_tracker.TransportationTracker.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timesteps</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.transportation_tracker.TransportationTracker.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timesteps</strong> – An integer of the maximum number of timesteps that will be
recorded in the model.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="celavi.transportation_tracker.TransportationTracker.increment_inbound_tonne_km">
<code class="sig-name descname">increment_inbound_tonne_km</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tonne_km</span></em>, <em class="sig-param"><span class="n">timestep</span></em>, <em class="sig-param"><span class="n">route_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#celavi.transportation_tracker.TransportationTracker.increment_inbound_tonne_km" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tonne_km</strong> – A float of the number of tonne*km being transported during the
given timestep.</p></li>
<li><p><strong>timestep</strong> – The timestep that is being incremented.</p></li>
<li><p><strong>route_id</strong> – UUID for the route along which material is transported</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="doc_costgraph.html" class="btn btn-neutral float-right" title="Cost Graph" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="doc_scenario.html" class="btn btn-neutral float-left" title="Scenario" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, NREL

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>